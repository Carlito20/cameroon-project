---
const currentPath = Astro.url.pathname;
import '../styles/navigation.css';
import LanguageSelector from './LanguageSelector.astro';
import { categories } from '../data/categories';
---

<nav class="navbar">
  <div class="container">
    <div class="nav-content">
      <a href="/" class="logo">
        <span class="logo-icon">ðŸ“¦</span>
        <span class="logo-text">American Select Market</span>
      </a>
      <ul class="nav-links">
        <li><a href="/" class={currentPath === '/' ? 'active' : ''}>Home</a></li>
        <li class="nav-dropdown">
          <a href="/shop" class={currentPath.startsWith('/shop') ? 'active dropdown-trigger' : 'dropdown-trigger'}>
            Shop
            <svg class="dropdown-arrow" width="10" height="6" viewBox="0 0 10 6" fill="none">
              <path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
          <div class="dropdown-menu">
            <a href="/shop" class="dropdown-item dropdown-all">
              <span class="dropdown-icon">ðŸ“¦</span>
              All Categories
            </a>
            <div class="dropdown-divider"></div>
            {categories.map((category) => (
              <a href={`/shop?category=${category.id}`} class="dropdown-item">
                <span class="dropdown-icon">{category.icon}</span>
                {category.name}
              </a>
            ))}
          </div>
        </li>
        <li><a href="/about" class={currentPath === '/about' ? 'active' : ''}>About Us</a></li>
        <li><a href="/bulk-orders" class={currentPath === '/bulk-orders' ? 'active' : ''}>Bulk Orders</a></li>
        <li><a href="/contact" class={currentPath === '/contact' ? 'active' : ''}>Contact</a></li>
      </ul>
      <div class="nav-right">
        <LanguageSelector />
        <button class="mobile-menu-toggle" aria-label="Toggle menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
  </div>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggle = document.querySelector('.mobile-menu-toggle');
    const navLinks = document.querySelector('.nav-links');
    
    if (toggle && navLinks) {
      toggle.addEventListener('click', () => {
        navLinks.classList.toggle('active');
      });
    }
  });
</script>

